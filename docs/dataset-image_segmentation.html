---

title: Dataset for image segmentation


keywords: fastai
sidebar: home_sidebar

summary: "Creates a dataset for image segmentation."
description: "Creates a dataset for image segmentation."
nb_path: "nbs/dataset-image_segmentation.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/dataset-image_segmentation.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Creating a data-set for a classification or segmentation task. If an annotation file is present, the annotations are also prepared.
The data-set is created based on an image-set.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Image-Set">Image-Set<a class="anchor-link" href="#Image-Set"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Image-sets are collected images to build a data-set from, stored in the <code>imagesets</code> folder.
The <code>imagesets</code> folder contains the following folder structure:</p>
<ul>
<li>imagesets/<em>[image_set_type]</em>/<em>[image_set_name]</em></li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Inside the <code>[image_set_name]</code> folder are the following files / folders</p>
<ul>
<li><code>test/</code>: test images (benchmark)</li>
<li><code>trainval/</code>: training and validation images for <a href="https://pdc-pj.backlog.jp/wiki/RAD_RAD/Neural+Network+-+Training">cross validation</a></li>
<li><code>categories.txt</code>: all categories (classes) the image-set contains</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Data-Set-Folders">Data-Set Folders<a class="anchor-link" href="#Data-Set-Folders"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Data-sets are stored in the <code>datasets</code> base folder.
The <code>datasets</code> folder contains the following folder structure:</p>
<ul>
<li>datasets/<em>[data_set_type]</em>/<em>[data_set_name]</em>
where <code>[data_set_type]</code> is the same as the corresponding <code>[image_set_type]</code> and <code>[data_set_name]</code> is the same as the corresponding <code>[image_set_name]</code>.</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Inside the <code>[data_set_name]</code> folder are the following files / folders</p>
<ul>
<li><code>test/</code>: test set (benchmark)</li>
<li><code>train/</code>: training set</li>
<li><code>val/</code>: validation set</li>
<li><code>categories.txt</code>: all categories (classes) the data-set contains</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Create-a-segmentation-data-set">Create a segmentation data-set<a class="anchor-link" href="#Create-a-segmentation-data-set"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Segmentation data-set can be created from a segmentation image-set.
All images are validated against the annotations, if they contain at least one annotation and that the annotation category belongs to one of the given categories. The annotations have to be in <a href="http://www.robots.ox.ac.uk/~vgg/software/via/via-1.0.5.html">VIA v1</a> json format. Rectangle annotations are converted into polygon annotations for unique segment generation.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="ImageSegmentationDataset" class="doc_header"><code>class</code> <code>ImageSegmentationDataset</code><a href="https://github.com/ai-force/ML-Core/tree/master/mlcore/dataset/image_segmentation.py#L24" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>ImageSegmentationDataset</code>(<strong><code>input_adapter</code></strong>:<a href="/ML-Core-Docs/annotation-core.html#AnnotationAdapter"><code>AnnotationAdapter</code></a>, <strong><code>output_adapter</code></strong>:<a href="/ML-Core-Docs/annotation-core.html#AnnotationAdapter"><code>AnnotationAdapter</code></a>, <strong><code>split</code></strong>=<em><code>None</code></em>, <strong><code>seed</code></strong>=<em><code>None</code></em>, <strong><code>sample</code></strong>=<em><code>None</code></em>, <strong><code>tfrecord</code></strong>=<em><code>False</code></em>, <strong><code>join_overlapping_regions</code></strong>=<em><code>False</code></em>, <strong><code>annotation_area_threshold</code></strong>=<em><code>None</code></em>, <strong><code>generate_semantic_masks</code></strong>=<em><code>True</code></em>) :: <a href="/ML-Core-Docs/dataset-image_object_detection.html#ImageObjectDetectionDataset"><code>ImageObjectDetectionDataset</code></a></p>
</blockquote>
<p>Object detection dataset.
<code>name</code>: The name of the dataset.
<code>base_path</code>: The data-set base-path.
<code>imageset_path</code>: The imageset source path.
<code>categories_path</code>: The path to the categories.txt file.
<code>annotations_path</code>: The path to the annotations-file.
<code>create_tfrecord</code>: Also create .tfrecord files.
<code>join_overlapping_regions</code>: Whether overlapping regions of same category should be joined.
<code>annotation_area_threshold</code>: Keep only annotations with minimum size (width or height) related to image size</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

</div>
 

